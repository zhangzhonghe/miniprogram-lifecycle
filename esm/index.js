const e=e=>"function"==typeof e,t=(e,t)=>{Object.keys(e).forEach((n=>{t(e[n],n)}))};let n=null;const o=()=>n,r=e=>n=e,s=()=>n=null,i=e=>{if(!e)return;const t=o();return function(...n){return t&&((e=>{e.isRefreshing||(e.isRefreshing=!0,s(),l((()=>{e(),e.isRefreshing=!1})),r(e))})(t),r(t)),e.call(this,...n)}},l=e=>Promise.resolve().then(e),c=Promise.prototype.then,a=Promise.prototype.catch,u=Promise.prototype.finally,h=wx;if(!c.$$isRewritten){Promise.prototype.then=function(e,t){return c.call(this,i(e),i(t))},Promise.prototype.catch=function(e){return a.call(this,i(e))},Promise.prototype.finally=function(e){return u.call(this,i(e))};const n=setTimeout;setTimeout=function(e,...t){return n.call(this,i(e),...t)},function(){const n={};t(h,((t,o)=>{e(t)?n[o]=function(e,...n){if(null!==(o=e)&&"object"==typeof o){const{success:t,fail:n,complete:o}=e;t&&(e.success=i(t)),n&&(e.fail=i(n)),o&&(e.complete=i(o))}var o;return t.call(this,e,...n)}:n[o]=t})),wx=Object.freeze(n)}(),Promise.prototype.then.$$isRewritten=!0}let p=null;const f=()=>p;let d=null;const m=e=>w("ready",e),v=e=>w("moved",e),y=e=>w("detached",e),g=e=>w("error",e),P=()=>d={ready:new Map,moved:new Map,detached:new Map,error:new Map},b=e=>{d&&t(d,(t=>{t.delete(e)}))},w=(e,t)=>{const n=null==d?void 0:d[e];if(n){let e;(e=n.get(f()))||(e=[],n.set(f(),e)),e.push(i(t))}},O=e=>(e.setup&&$(e),Component(e)),$=n=>{var i;const l=P(),c=E(n),a=R(n),u=null===(i=n.observers)||void 0===i?void 0:i[a];C(l,n),a&&((n.observers||(n.observers={}))[a]=function(...e){var t;null==u||u.call(this,...e),null===(t=this.$$updateData)||void 0===t||t.call(this)}),(n.lifetimes||(n.lifetimes={})).attached=function(){var i;const l={};null===(i=c.attached)||void 0===i||i.call(this),p=this,D(c),r((()=>{if(!e(a))return;const n=a();t(n,((t,o)=>{e(t)&&delete n[o]})),this.setData(n)})),this.$$updateData=o(),n.properties&&t(n.properties,((e,t)=>{Object.defineProperty(l,t,{get:()=>this.data[t],set(){}})}));let a=n.setup(l,j(this));function u(){M(this,a()),s(),y((()=>b(this)))}e(a)?u.call(this):a.then&&a.then((e=>{a=e,u.call(this)}))}},j=e=>{const t={},n=["animate","clearAnimation","createIntersectionObserver","createSelectorQuery","dataset","getOpenerEventChannel","getPageId","getRelationNodes","getTabBar","groupSetData","hasBehavior","id","is","selectAllComponents","selectComponent","selectOwnerComponent","setUpdatePerformanceListener","triggerEvent"];for(const o of n)Object.defineProperty(t,o,{get:()=>e[o],set(){}});return t},R=e=>{const t=e.properties;return t?Object.keys(t).join(","):""},C=(e,n)=>{const o=n.lifetimes=n.lifetimes||{};t(e,((e,t)=>{o[t]=function(...t){var n;null===(n=e.get(this))||void 0===n||n.forEach((e=>e(...t)))}}))},D=e=>{t(e,((e,t)=>{"attached"!==t&&("ready"===t&&m(e),"moved"===t&&v(e),"detached"===t&&y(e),"error"===t&&g(e))}))},E=e=>{const n=e.lifetimes=e.lifetimes||{},o={};return t(n,((e,t)=>{o[t]=e})),o},M=(n,o)=>{const r={};t(o,((t,o)=>{e(t)?n[o]=i(t):r[o]=t})),n.setData(r)};export{O as ComponentWithSetup,y as onDetached,g as onError,v as onMoved,m as onReady,i as useRefresh};
